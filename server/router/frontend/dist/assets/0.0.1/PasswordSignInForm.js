import{o as x,u as w,a as j,b as y,w as i,j as e,I as d,B as C,d as v,e as N,i as S,n as b}from"./index.js";import{r as c}from"./leaflet-vendor.js";const I=x(()=>{const t=w(),u=j(),a=y(!1),[o,m]=c.useState(i.state.profile.mode==="demo"?"yourselfhosted":""),[n,f]=c.useState(i.state.profile.mode==="demo"?"yourselfhosted":""),p=s=>{const r=s.target.value;m(r)},g=s=>{const r=s.target.value;f(r)},h=s=>{s.preventDefault(),l()},l=async()=>{if(!(o===""||n==="")&&!a.isLoading){try{a.setLoading(),await N.createSession({passwordCredentials:{username:o,password:n}}),await S(),u("/")}catch(s){console.error(s),b.error(s.details||"Failed to sign in.")}a.setFinish()}};return e.jsxs("form",{className:"w-full mt-2",onSubmit:h,children:[e.jsxs("div",{className:"flex flex-col justify-start items-start w-full gap-4",children:[e.jsxs("div",{className:"w-full flex flex-col justify-start items-start",children:[e.jsx("span",{className:"leading-8 text-muted-foreground",children:t("common.username")}),e.jsx(d,{className:"w-full bg-background h-10",type:"text",readOnly:a.isLoading,placeholder:t("common.username"),value:o,autoComplete:"username",autoCapitalize:"off",spellCheck:!1,onChange:p,required:!0})]}),e.jsxs("div",{className:"w-full flex flex-col justify-start items-start",children:[e.jsx("span",{className:"leading-8 text-muted-foreground",children:t("common.password")}),e.jsx(d,{className:"w-full bg-background h-10",type:"password",readOnly:a.isLoading,placeholder:t("common.password"),value:n,autoComplete:"password",autoCapitalize:"off",spellCheck:!1,onChange:g,required:!0})]})]}),e.jsx("div",{className:"flex flex-row justify-end items-center w-full mt-6",children:e.jsxs(C,{type:"submit",className:"w-full h-10",disabled:a.isLoading,onClick:l,children:[t("common.sign-in"),a.isLoading&&e.jsx(v,{className:"w-5 h-auto ml-2 animate-spin opacity-60"})]})})]})});export{I as P};
