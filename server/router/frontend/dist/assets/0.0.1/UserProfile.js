import{o as h,u as y,Q as j,b as w,V as g,n as m,f as v,m as u,j as e,B as N,W as S,P as U,v as d,S as T,M as $,X as B}from"./index.js";import{d as a}from"./mermaid-vendor.js";import{r as o}from"./leaflet-vendor.js";import{E}from"./external-link.js";import"./utils-vendor.js";import"./katex-vendor.js";const k=h(()=>{const i=y(),n=j(),l=w(),[r,f]=o.useState();o.useEffect(()=>{const s=n.username;if(!s)throw new Error("username is required");g.getOrFetchUserByUsername(s).then(t=>{f(t),l.setFinish()}).catch(t=>{console.error(t),m.error(i("message.user-not-found"))})},[n.username]);const x=o.useMemo(()=>{if(!r)return;const s=[`creator_id == ${v(r.name)}`];for(const t of u.filters)t.factor==="contentSearch"?s.push(`content.contains("${t.value}")`):t.factor==="tagSearch"&&s.push(`tag in ["${t.value}"]`);return s.length>0?s.join(" && "):void 0},[r,u.filters]),p=()=>{r&&(B(`${window.location.origin}/u/${encodeURIComponent(r.username)}`),m.success(i("message.copied")))};return e.jsx("section",{className:"w-full max-w-3xl min-h-full flex flex-col justify-start items-center pb-8",children:e.jsx("div",{className:"w-full flex flex-col justify-start items-center max-w-2xl",children:!l.isLoading&&(r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"my-4 w-full flex justify-end items-center gap-2",children:e.jsxs(N,{variant:"outline",onClick:p,children:[i("common.share"),e.jsx(E,{className:"ml-1 w-4 h-auto opacity-60"})]})}),e.jsxs("div",{className:"w-full flex flex-col justify-start items-start pt-4 pb-8 px-3",children:[e.jsx(S,{className:"w-16! h-16! drop-shadow rounded-3xl",avatarUrl:r?.avatarUrl}),e.jsxs("div",{className:"mt-2 w-auto max-w-[calc(100%-6rem)] flex flex-col justify-center items-start",children:[e.jsx("p",{className:"w-full text-3xl text-foreground leading-tight font-medium opacity-80 truncate",children:r.displayName||r.username}),e.jsx("p",{className:"w-full text-muted-foreground leading-snug whitespace-pre-wrap truncate line-clamp-6",children:r.description})]})]}),e.jsx(U,{renderer:s=>e.jsx($,{memo:s,showVisibility:!0,showPinned:!0,compact:!0},`${s.name}-${s.displayTime}`),listSort:s=>s.filter(t=>t.state===T.NORMAL).sort((t,c)=>d.state.orderByTimeAsc?a(t.displayTime).unix()-a(c.displayTime).unix():a(c.displayTime).unix()-a(t.displayTime).unix()),orderBy:d.state.orderByTimeAsc?"display_time asc":"display_time desc",filter:x})]}):e.jsx("p",{children:"Not found"}))})})});export{k as default};
