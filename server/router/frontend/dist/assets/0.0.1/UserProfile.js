import{o as h,u as y,J as j,b as w,K as g,n as m,f as v,m as u,j as s,B as N,N as S,P as U,v as d,S as T,M as $,O as B}from"./index.js";import{d as a}from"./mermaid-vendor.js";import{r as o}from"./leaflet-vendor.js";import{E}from"./external-link.js";import"./utils-vendor.js";import"./katex-vendor.js";const k=h(()=>{const i=y(),n=j(),l=w(),[r,f]=o.useState();o.useEffect(()=>{const t=n.username;if(!t)throw new Error("username is required");g.getOrFetchUserByUsername(t).then(e=>{f(e),l.setFinish()}).catch(e=>{console.error(e),m.error(i("message.user-not-found"))})},[n.username]);const x=o.useMemo(()=>{if(!r)return;const t=[`creator_id == ${v(r.name)}`];for(const e of u.filters)e.factor==="contentSearch"?t.push(`content.contains("${e.value}")`):e.factor==="tagSearch"&&t.push(`tag in ["${e.value}"]`);return t.length>0?t.join(" && "):void 0},[r,u.filters]),p=()=>{r&&(B(`${window.location.origin}/u/${encodeURIComponent(r.username)}`),m.success(i("message.copied")))};return s.jsx("section",{className:"w-full max-w-3xl min-h-full flex flex-col justify-start items-center pb-8",children:s.jsx("div",{className:"w-full flex flex-col justify-start items-center max-w-2xl",children:!l.isLoading&&(r?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"my-4 w-full flex justify-end items-center gap-2",children:s.jsxs(N,{variant:"outline",onClick:p,children:[i("common.share"),s.jsx(E,{className:"ml-1 w-4 h-auto opacity-60"})]})}),s.jsxs("div",{className:"w-full flex flex-col justify-start items-start pt-4 pb-8 px-3",children:[s.jsx(S,{className:"w-16! h-16! drop-shadow rounded-3xl",avatarUrl:r?.avatarUrl}),s.jsxs("div",{className:"mt-2 w-auto max-w-[calc(100%-6rem)] flex flex-col justify-center items-start",children:[s.jsx("p",{className:"w-full text-3xl text-foreground leading-tight font-medium opacity-80 truncate",children:r.displayName||r.username}),s.jsx("p",{className:"w-full text-muted-foreground leading-snug whitespace-pre-wrap truncate line-clamp-6",children:r.description})]})]}),s.jsx(U,{renderer:(t,e)=>s.jsx($,{memo:t,showVisibility:!0,showPinned:!0,compact:e?.compact},`${t.name}-${t.displayTime}`),listSort:t=>t.filter(e=>e.state===T.NORMAL).sort((e,c)=>d.state.orderByTimeAsc?a(e.displayTime).unix()-a(c.displayTime).unix():a(c.displayTime).unix()-a(e.displayTime).unix()),orderBy:d.state.orderByTimeAsc?"display_time asc":"display_time desc",filter:x})]}):s.jsx("p",{children:"Not found"}))})})});export{k as default};
