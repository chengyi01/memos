import{o as u,a as f,g as m,h as p,d as g,i as h,j as t,L as x}from"./index.js";import{r as l}from"./leaflet-vendor.js";import{l as v}from"./utils-vendor.js";import"./mermaid-vendor.js";import"./katex-vendor.js";const N=u(()=>{const c=f(),[a]=m(),[s,e]=l.useState({loading:!0,errorMessage:""});return l.useEffect(()=>{const r=a.get("code"),o=a.get("state");if(!r||!o){e({loading:!1,errorMessage:"Failed to authorize. Invalid state passed to the auth callback."});return}const i=Number(v(o.split("-")));if(!i){e({loading:!1,errorMessage:"No identity provider ID found in the state parameter."});return}const d=p("/auth/callback");(async()=>{try{await g.createSession({ssoCredentials:{idpId:i,code:r,redirectUri:d}}),e({loading:!1,errorMessage:""}),await h(),c("/")}catch(n){console.error(n),e({loading:!1,errorMessage:n.details})}})()},[a]),t.jsx("div",{className:"p-4 py-24 w-full h-full flex justify-center items-center",children:s.loading?t.jsx(x,{className:"animate-spin text-foreground"}):t.jsx("div",{className:"max-w-lg font-mono whitespace-pre-wrap opacity-80",children:s.errorMessage})})});export{N as default};
